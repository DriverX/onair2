"undefined"===typeof onAir2&&function(j,i,I){function J(a){var c=[];m(a,function(b,d){K.call(a,d)&&c.push(u(d)+"="+u("[object Function]"===L.call(b)?b():b))});return c.join("&")}function y(a,c,b){var d=a[g]=a[g]||v++,e=r[d]=r[d]||{},d=b[g]=b[g]||v++,k=e[c]=e[c]||[];1==k.push(b)&&(b=function(b){var c,b=b||j.event;m(k,function(d){!1===d.call(a,b)&&(b.preventDefault&&b.preventDefault(),b.returnFalse=!1,b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,c=!1)});return c},b.secured=a,b[g]=d,k.wrapper=
b,w(a,c,k.wrapper))}function z(a,c,b){if(a[g]&&(r[a[g]]||{})[c]&&b[g]){for(var d=r[a[g]][c],e=d.length,k=0;k<e;)d[k][g]==b[g]&&(d.splice(k,1),e--),k++;e||A(a,c,d.wrapper)}}function M(a,c,b){var d;d="offset"+c.substring(0,1).toUpperCase()+c.slice(1);if(!b&&0!=a[d])d=a[d];else{b={};for(c in B)b[c]=a.style[c],a.style[c]=B[c];d=a[d];for(c in b)a.style[c]=b[c]}return d}function C(a){for(var c,b=a.length,d=a.slice();b--;)a=parseInt(Math.random()*(b+1)),c=d[b],d[b]=d[a],d[a]=c;return d}function N(a){a&&
(l.push(a)-1||(x=setInterval(O,25)))}function O(){for(var a=0,c=l.length;a<c;)!1===l[a]()?(l.splice(a,1),c--):a++;!c&&clearInterval(x)}function f(a){if(!(this instanceof f))return new f(a);if(!a||!a.container||a.uniqueName&&f.instances[a.uniqueName]&&!a.instanceExistDestroy)throw Error("onAir incorrect options");this.guid=v++;var c=this.options=D({charset:"utf-8",linkPattern:"http://go.mail.ru/search?q={searchTerms}",linkTarget:"_blank",showLinkTitle:!1,scrollEnabled:!0,scrollDelay:1E3,scrollDuration:500,
shuffle:!1,visibleItems:9,updateAfterLoop:-1,blockClass:"onair-block",listClass:"onair-list",itemClass:"onair-item",linkClass:"onair-link",loadingClass:"onair-loading"},a);this.name=c.uniqueName?c.uniqueName:"onair"+this.guid;if(f.instances[this.name])if(c.instanceExistDestroy)f.instances[this.name].destroy();else throw Error('onAir instance name "'+this.name+'" already exist.');this.container="string"===typeof a.container?i.getElementById(a.container):a.container;this.isRemoteItems="string"===typeof a.items;
this.isRemoteItems||(this.items=c.shuffle?C(a.items):a.items);f.instances[this.name]=this;if(c.scrollEnabled){var b=this;this.blockMouseOver=function(){b.stop()};this.blockMouseOut=function(){b.start()}}}function o(){f.isReady||(i.body?(f.isReady=!0,p&&(m(p,function(a){a()}),p=null)):setTimeout(o,13))}var q=!!i.addEventListener,L=Object.prototype.toString,K=Object.prototype.hasOwnProperty,u=j.encodeURIComponent,P=Array.prototype.slice,s=Date.now||function(){return+new Date},v=1,g="onair"+s(),m=function(a,
c,b){var b=b||null,d=a.length;if(d===I)for(d in a){if(!1===c.call(b,a[d],d,a))break}else for(var e=0;e<d&&!1!==c.call(b,a[e],e,a);e++);return a},D=function(a){m(P.call(arguments,1),function(c){if(c)for(var b in c)a[b]=c[b]});return a},r={},w=q?function(a,c,b){a.addEventListener(c,b,!1)}:function(a,c,b){a.attachEvent("on"+c,b)},A=q?function(a,c,b){a.removeEventListener(c,b,!1)}:function(a,c,b){a.detachEvent("on"+c,b)},B={position:"absolute",visibility:"hidden",display:"block"},n="requestAnimationFrame",
E=!!j[n];E||(n=n.charAt(0).toUpperCase()+n.slice(1),m(["webkit","moz","o","ms"],function(a){a+=n;if(j[a])return n=a,E=!0,!1}));var l=[],x;f.prototype={draw:function(){this.stop();this.clean();this.currentLoop=this.firstVisibleItem=0;var a=this,c=this.options,b=this.block;this.block||(b=this.block=i.createElement("div"),b.id=this.name,b.className=c.blockClass,b.style.position="relative",b.style.overflow="hidden",this.container.appendChild(b),c.scrollEnabled&&(y(b,"mouseover",this.blockMouseOver),y(b,
"mouseout",this.blockMouseOut)));if(this.items&&this.items.length){var d=this.list=i.createElement("ul");d.className=c.listClass;d.style.position="relative";d.style.overflow="hidden";m(this.items,function(b){var e=i.createElement("li"),h=i.createElement("a");e.className=a.options.itemClass;h.className=a.options.linkClass;var f=(""+c.linkPattern).replace(/\{(\w+)\}/g,function(a,c){return"searchTerms"===c?u(b):""});h.setAttribute("href",f);c.showLinkTitle&&h.setAttribute("title",b);c.linkTarget&&h.setAttribute("target",
c.linkTarget);h.appendChild(i.createTextNode(b));e.appendChild(h);d.appendChild(e)});b.style.height="1px";d.style.zoom="1";b.appendChild(d);var e=this.heightPerItem=M(d.firstChild,"height"),e=-1!=c.visibleItems?e*c.visibleItems:"";b.style.height=e?e+"px":"";c.scrollEnabled&&this.start()}else this.isRemoteItems&&this.update()},clean:function(){for(var a=this.block;a&&a.firstChild;)a.removeChild(a.firstChild)},destroy:function(){this.stop(!0);this.clean();var a=this.block;a&&(z(a,"mouseover",this.blockMouseOver),
z(a,"mouseout",this.blockMouseOut),a.parentNode&&a.parentNode.removeChild(a),this.block=null);delete f.instances[this.name]},update:function(){function a(a){c.items=c.options.shuffle?C(a):a;c.draw()}var c=this;this.stop(!0);this.isRemoteItems?this.getItems(function(b){a(b)}):a(this.items)},getItems:function(a){if(this.isRemoteItems){var c=this.options,b=i.getElementsByTagName("head")[0]||i.getElementsByTagName("body")[0],d=c.params?D({},c.params):{},e=this.name,f=e+s();d.callback||(d.callback=f);
var g=i.createElement("script");g.charset=c.charset;g.src=c.items+(/\?.*$/.test(c.items)?"&":"?")+J(d);var d=this.block,h=i.createElement("div");h.className=c.loadingClass;h.style.display="block";h.style.position="absolute";h.style.left=h.style.top="0";h.style.width=h.style.height="100%";d.style.height="60px";d.appendChild(h);t[e]=f;j[f]=function(c){h&&h.parentNode&&h.parentNode.removeChild(h);a(c);try{delete j[f]}catch(d){}delete t[e];g.parentNode&&b.removeChild(g)};b.insertBefore(g,b.firstChild)}else a(this.items)},
scroller:function(){var a=this.options,c=this.items,b=this.list;if(this.immediateStopped)return!1;var d=this.fromPos,e=this.toPos,f=this.startTime,i=this.stopTime,h=s(),g=!1;h>=i?(b.insertBefore(b.firstChild,null),this.firstVisibleItem++==c.length-1&&(this.firstVisibleItem=1,this.currentLoop++),a=0,g=!0):a=d+(e-d)*((h-f)/a.scrollDuration);b.style.top=a+"px";return!g},start:function(a){function c(){function e(){b.scrollDelayTimeout=null;b.scrolling=!0;b.fromPos=parseFloat(f.style.top)||0;b.toPos=-g;
b.startTime=s();b.stopTime=b.startTime+d.scrollDuration;b._scroller=function(){var a=!b.scroller();a&&(b.scrolling=!1,b._scroller=null,b.currentLoop==d.updateAfterLoop?b.update():b.stopped||c());return!a};N(b._scroller)}a?(a=!1,e()):b.scrollDelayTimeout=setTimeout(e,d.scrollDelay)}var b=this,d=this.options,e=this.items,f=this.list,g=this.heightPerItem;d.scrollEnabled&&e.length&&f&&g&&!this.scrollDelayTimeout&&!this.scrolling&&(this.immediateStopped=this.stopped=!1,c())},stop:function(a){clearTimeout(this.scrollDelayTimeout);
this.scrollDelayTimeout=null;this.stopped=!0;if(a&&(this.immediateStopped=!0,this.scrolling=!1,this._scroller)){for(var a=this._scroller,c=l.length;c--;)if(l[c]===a){l.splice(c,1);break}l.length||clearInterval(x)}}};f.instances={};var t={};f.catcher=function(a,c){if(a&&t[a]){var b=j[t[a]];b&&b(c)}};var p=[],F,G=q?"DOMContentLoaded":"readystatechange",H=function(){if(q||"complete"===i.readyState)A(i,G,H),o()};f.isReady=!1;f.ready=function(a){f.isReady?a():p&&(p.push(a),F||(F=!0,"complete"===i.readyState?
o():(w(i,G,H),w(j,"load",o),q||function(){if(!f.isReady)try{i.documentElement.doScroll("left"),o()}catch(a){setTimeout(arguments.callee,10)}}())))};j.onAir2=f}(window,document);
