"undefined"===typeof onAir2&&function(j,G){function H(a){var b=[];l(a,function(c,d){a.hasOwnProperty(d)&&b.push(s(d)+"="+s("[object Function]"===I.call(c)?c():c))});return b.join("&")}function v(a,b,c){var d=a[m]=a[m]||t++,k=q[d]=q[d]||{},d=c.guid=c.guid||t++,g=k[b]=k[b]||[];1==g.push(c)&&(c=function(b){var c,b=b||j.event;l(g,function(d){!1===d.call(a,b)&&(b.preventDefault&&b.preventDefault(),b.returnFalse=!1,b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,c=!1)});return c},c.secured=a,c.guid=
d,g.wrapper=c,u(a,b,g.wrapper))}function w(a,b,c){if(a[m]&&(q[a[m]]||{})[b]&&c.guid){for(var d=q[a[m]][b],k=d.length,g=0;g<k;)d[g].guid==c.guid&&(d.splice(g,1),k--),g++;k||x(a,b,d.wrapper)}}function J(a,b,c){var d;d="offset"+b.substring(0,1).toUpperCase()+b.slice(1);if(!c&&0!=a[d])d=a[d];else{c={};for(b in y)c[b]=a.style[b],a.style[b]=y[b];d=a[d];for(b in c)a.style[b]=c[b]}return d}function K(a){a=s(a);return(this.options.linkPattern||"").replace(/\{(\w+)\}/g,function(b,c){return"searchTerms"===c?
a:""})}function L(){z=setInterval(function(){for(var a=0,b=h.length;a<b;)h[a]()?a++:(h.splice(a,1),b--);b||clearInterval(z)},13)}function A(a,b){b=b||this;return function(){return a.apply(b,arguments)}}function e(a){if(!a||!a.container||a.uniqueName&&e.instances[a.uniqueName]&&!a.instanceExistDestroy)throw Error("onAir-incorrect settings");e.instances[a.uniqueName]&&e.instances[a.uniqueName].destroy();this.guid=t++;this.options=B({uniqueName:"onair"+this.guid},e.options,a);this.container="string"===
typeof a.container?f.getElementById(a.container):a.container;this.isRemoteItems="string"===typeof a.items;this.isRemoteItems||(this.items=a.items);e.instances[this.options.uniqueName]=this}function n(){e.isReady||(f.body?(e.isReady=!0,o&&(l(o,function(a){a()}),o=null)):setTimeout(n,13))}var t=1,m="onair"+(new Date).getTime(),f=j.document,p=!!f.addEventListener,I=Object.prototype.toString,s=j.encodeURIComponent,C=Array.prototype.forEach,l=function(a,b,c){var d=a.length,c=c||null;if(d===G)for(d in a){if(!1===
b.call(c,a[d],d,a))break}else if(C)C.call(a,b,c);else for(var k=0;k<d&&!1!==b.call(c,a[k],k,a);k++);return a},B=function(a,b){l(Array.prototype.slice.call(arguments,1),function(b){for(var d in b)a[d]=b[d]});return a},q={},u=p?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},x=p?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},y={position:"absolute",visibility:"hidden",display:"block"},z,h=[];e.prototype={draw:function(){this.stop();
this.clean();this.currentLoop=this.firstVisibleItem=0;var a=this,b=this.block;this.block||(b=this.block=f.createElement("div"),b.id=this.options.uniqueName,b.className=this.options.blockClass,b.style.position="relative",b.style.overflow="hidden",this.container.appendChild(b),v(b,"mouseover",A(this.stop,this)),v(b,"mouseout",A(this.start,this)));if(this.items&&this.items.length){var c=this.list=f.createElement("ul");c.className=this.options.listClass;c.style.position="relative";c.style.overflow="hidden";
l(this.items,function(b){var d=f.createElement("li"),e=f.createElement("a");d.className=a.options.itemClass;e.className=a.options.linkClass;e.setAttribute("href",K.call(a,b));e.setAttribute("title",b);e.setAttribute("target",a.options.linkTarget);e.appendChild(f.createTextNode(b));d.appendChild(e);c.appendChild(d)});b.style.height="1px";c.style.zoom="1";b.appendChild(c);var d=this.heightPerItem=J(c.firstChild,"height"),d=-1!=this.options.visibleItems?d*this.options.visibleItems:"";b.style.height=
d?d+"px":"";this.start()}else this.isRemoteItems&&this.update()},clean:function(){for(var a=this.block;a&&a.firstChild;)a.removeChild(a.firstChild)},destroy:function(){this.stop(!0);this.clean();var a=this.block;w(a,"mouseover",this.stop);w(a,"mouseout",this.start);this.container.removeChild(a);this.block=null;delete e.instances[this.options.uniqueName]},start:function(){function a(){var a=parseFloat(c.style.top)||0,e=-b.heightPerItem,f=0,j=(new Date).getTime(),i=b.options.scrollDuration;b.scrollHandlerId=
h.push(function(){var h=(new Date).getTime();if(h>=j+i)return c.insertBefore(c.firstChild,null),f=0,b.firstVisibleItem++==b.items.length-1&&(b.firstVisibleItem=1,b.currentLoop++),c.style.top=f+"px",b.delayId=null,b.scrollHandlerId=null,b.currentLoop==b.options.updateAfterLoop&&b.update(),b.isNeedStop?b.stop():b.start(),!1;f=a+(e-a)*((h-j)/i);c.style.top=f+"px";return!0})-1;b.scrollHandlerId||L()}if(-1==this.options.visibleItems||this.delayId||!this.items||this.items.length<=this.options.visibleItems)return!1;
var b=this,c=this.list;this.isNeedStop=!1;parseInt(c.style.top)?a():this.delayId=setTimeout(a,this.options.scrollDelay)},stop:function(a){if(-1==this.options.visibleItems||!this.items||this.items.length<=this.options.visibleItems)return!1;!0===a&&null!==this.scrollHandlerId&&h[this.scrollHandlerId]&&(h.splice(this.scrollHandlerId,1),this.scrollHandlerId=null);this.delayId&&null===this.scrollHandlerId?(clearTimeout(this.delayId),this.delayId=null):this.isNeedStop=!0},update:function(){if(this.isRemoteItems){var a=
this;this.stop(!0);this.getItems(function(b){a.items=b;a.draw()})}},getItems:function(a){if(this.isRemoteItems){var b=f.getElementsByTagName("head")[0]||f.getElementsByTagName("body")[0],c=this.options.params?B({},this.options.params):{},d=this.options.uniqueName,e=d+(new Date).getTime();c.callback||(c.callback=e);var g=f.createElement("script");g.charset=this.options.charset;g.src=this.options.items+(/\?.*$/.test(this.options.items)?"&":"?")+H(c);var h=this.block,i=f.createElement("div");i.className=
this.options.loadingClass;i.style.display="block";i.style.position="absolute";i.style.left=i.style.top="0";i.style.width=i.style.height="100%";h.style.height="60px";h.appendChild(i);r[d]=e;j[e]=function(c){h.removeChild(i);a(c);try{delete j[e]}catch(f){}delete r[d];b.removeChild(g)};b.insertBefore(g,b.firstChild)}else a(this.items)}};e.instances={};e.options={charset:f.charset||f.characterSet||"utf-8",linkPattern:"http://go.mail.ru/search?q={searchTerms}",linkTarget:"_blank",scrollDelay:1E3,scrollDuration:500,
visibleItems:9,updateAfterLoop:-1,blockClass:"onair-block",listClass:"onair-list",itemClass:"onair-item",linkClass:"onair-link",loadingClass:"onair-loading"};var r={};e.catcher=function(a,b){if(a&&r[a]){var c=j[r[a]];c&&c(b)}};var o=[],D,E=p?"DOMContentLoaded":"readystatechange",F=function(){if(p||"complete"===f.readyState)x(f,E,F),n()};e.isReady=!1;e.ready=function(a){e.isReady?a():o&&(o.push(a),D||(D=!0,"complete"===f.readyState?n():(u(f,E,F),u(j,"load",n),p||function(){if(!e.isReady)try{f.documentElement.doScroll("left"),
n()}catch(a){setTimeout(arguments.callee,10)}}())))};j.onAir2=e}(this);
