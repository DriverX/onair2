"undefined"===typeof onAir2&&function(j,g,J){function K(a){var c=[];m(a,function(b,d){L.call(a,d)&&c.push(u(d)+"="+u("[object Function]"===M.call(b)?b():b))});return c.join("&")}function z(a,c,b){var d=a[h]=a[h]||v++,f=r[d]=r[d]||{},d=b[h]=b[h]||v++,k=f[c]=f[c]||[];1==k.push(b)&&(b=function(b){var c,b=b||j.event;m(k,function(d){!1===d.call(a,b)&&(b.preventDefault&&b.preventDefault(),b.returnFalse=!1,b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,c=!1)});return c},b.secured=a,b[h]=d,k.wrapper=
b,x(a,c,k.wrapper))}function A(a,c,b){if(a[h]&&(r[a[h]]||{})[c]&&b[h]){for(var d=r[a[h]][c],f=d.length,k=0;k<f;)d[k][h]==b[h]&&(d.splice(k,1),f--),k++;f||B(a,c,d.wrapper)}}function N(a,c,b){var d;d="offset"+c.substring(0,1).toUpperCase()+c.slice(1);if(!b&&0!=a[d])d=a[d];else{b={};for(c in C)b[c]=a.style[c],a.style[c]=C[c];d=a[d];for(c in b)a.style[c]=b[c]}return d}function D(a){for(var c,b=a.length,d=a.slice();b--;)a=parseInt(Math.random()*(b+1)),c=d[b],d[b]=d[a],d[a]=c;return d}function O(a){a&&
(l.push(a)-1||(y=setInterval(P,25)))}function P(){for(var a=0,c=l.length;a<c;)!1===l[a]()?(l.splice(a,1),c--):a++;!c&&clearInterval(y)}function e(a){if(!(this instanceof e))return new e(a);if(!a||!a.container||a.uniqueName&&e.instances[a.uniqueName]&&!a.instanceExistDestroy)throw Error("onAir incorrect options");this.guid=v++;var c=this.options=E({charset:"utf-8",linkPattern:"http://go.mail.ru/search?q={searchTerms}",linkTarget:"_blank",showLinkTitle:!0,scrollEnabled:!0,scrollDelay:1E3,scrollDuration:500,
shuffle:!1,visibleItems:9,updateAfterLoop:-1,blockClass:"onair-block",listClass:"onair-list",itemClass:"onair-item",linkClass:"onair-link",loadingClass:"onair-loading"},a);this.name=c.uniqueName?c.uniqueName:"onair"+this.guid;if(e.instances[this.name])if(c.instanceExistDestroy)e.instances[this.name].destroy();else throw Error('onAir instance name "'+this.name+'" already exist.');this.container="string"===typeof a.container?g.getElementById(a.container):a.container;this.isRemoteItems="string"===typeof a.items;
this.isRemoteItems||(this.items=c.shuffle?D(a.items):a.items);e.instances[this.name]=this;if(c.scrollEnabled){var b=this;this.blockMouseOver=function(){b.stop()};this.blockMouseOut=function(){b.start()}}}function o(){e.isReady||(g.body?(e.isReady=!0,p&&(m(p,function(a){a()}),p=null)):setTimeout(o,13))}var q=!!g.addEventListener,M=Object.prototype.toString,L=Object.prototype.hasOwnProperty,u=j.encodeURIComponent,Q=Array.prototype.slice,s=Date.now||function(){return+new Date},v=1,h="onair"+s(),m=function(a,
c,b){var b=b||null,d=a.length;if(d===J)for(d in a){if(!1===c.call(b,a[d],d,a))break}else for(var f=0;f<d&&!1!==c.call(b,a[f],f,a);f++);return a},E=function(a){m(Q.call(arguments,1),function(c){if(c)for(var b in c)a[b]=c[b]});return a},r={},x=q?function(a,c,b){a.addEventListener(c,b,!1)}:function(a,c,b){a.attachEvent("on"+c,b)},B=q?function(a,c,b){a.removeEventListener(c,b,!1)}:function(a,c,b){a.detachEvent("on"+c,b)},C={position:"absolute",visibility:"hidden",display:"block"},n="requestAnimationFrame",
F=!!j[n];F||(n=n.charAt(0).toUpperCase()+n.slice(1),m(["webkit","moz","o","ms"],function(a){a+=n;if(j[a])return n=a,F=!0,!1}));var l=[],y;e.prototype={draw:function(){this.stop();this.clean();this.currentLoop=this.firstVisibleItem=0;var a=this,c=this.options,b=this.block;this.block||(b=this.block=g.createElement("div"),b.id=this.name,b.className=c.blockClass,b.style.position="relative",b.style.overflow="hidden",this.container.appendChild(b),c.scrollEnabled&&(z(b,"mouseover",this.blockMouseOver),z(b,
"mouseout",this.blockMouseOut)));if(this.items&&this.items.length){var d=this.list=g.createElement("ul");d.className=c.listClass;d.style.position="relative";d.style.overflow="hidden";m(this.items,function(b){var f=g.createElement("li"),e=g.createElement("a");f.className=a.options.itemClass;e.className=a.options.linkClass;var i=(""+c.linkPattern).replace(/\{(\w+)\}/g,function(a,c){return"searchTerms"===c?u(b):""});e.setAttribute("href",i);c.showLinkTitle&&e.setAttribute("title",b);c.linkTarget&&e.setAttribute("target",
c.linkTarget);e.appendChild(g.createTextNode(b));f.appendChild(e);d.appendChild(f)});b.style.height="1px";d.style.zoom="1";b.appendChild(d);var f=this.heightPerItem=N(d.firstChild,"height"),f=-1!=c.visibleItems?f*c.visibleItems:"";b.style.height=f?f+"px":"";c.scrollEnabled&&this.start()}else this.isRemoteItems&&this.update()},clean:function(){for(var a=this.block;a&&a.firstChild;)a.removeChild(a.firstChild)},destroy:function(){this.stop(!0);this.clean();var a=this.block;A(a,"mouseover",this.blockMouseOver);
A(a,"mouseout",this.blockMouseOut);this.container.removeChild(a);this.block=null;delete e.instances[this.name]},update:function(){function a(a){c.items=c.options.shuffle?D(a):a;c.draw()}var c=this;this.stop(!0);this.isRemoteItems?this.getItems(function(b){a(b)}):a(this.items)},getItems:function(a){if(this.isRemoteItems){var c=this.options,b=g.getElementsByTagName("head")[0]||g.getElementsByTagName("body")[0],d=c.params?E({},c.params):{},f=this.name,e=f+s();d.callback||(d.callback=e);var h=g.createElement("script");
h.charset=c.charset;h.src=c.items+(/\?.*$/.test(c.items)?"&":"?")+K(d);var w=this.block,i=g.createElement("div");i.className=c.loadingClass;i.style.display="block";i.style.position="absolute";i.style.left=i.style.top="0";i.style.width=i.style.height="100%";w.style.height="60px";w.appendChild(i);t[f]=e;j[e]=function(c){w.removeChild(i);a(c);try{delete j[e]}catch(d){}delete t[f];b.removeChild(h)};b.insertBefore(h,b.firstChild)}else a(this.items)},scroller:function(){var a=this.options,c=this.items,
b=this.list;if(this.immediateStopped)return!1;var d=this.fromPos,e=this.toPos,g=this.startTime,h=this.stopTime,j=s(),i=!1;j>=h?(b.insertBefore(b.firstChild,null),this.firstVisibleItem++==c.length-1&&(this.firstVisibleItem=1,this.currentLoop++),a=0,i=!0):a=d+(e-d)*((j-g)/a.scrollDuration);b.style.top=a+"px";return!i},start:function(a){function c(){function e(){b.scrollDelayTimeout=null;b.scrolling=!0;b.fromPos=parseFloat(g.style.top)||0;b.toPos=-h;b.startTime=s();b.stopTime=b.startTime+d.scrollDuration;
b._scroller=function(){var a=!b.scroller();a&&(b.scrolling=!1,b._scroller=null,b.currentLoop==d.updateAfterLoop?b.update():b.stopped||c());return!a};O(b._scroller)}a?(a=!1,e()):b.scrollDelayTimeout=setTimeout(e,d.scrollDelay)}var b=this,d=this.options,e=this.items,g=this.list,h=this.heightPerItem;d.scrollEnabled&&e.length&&g&&h&&!this.scrollDelayTimeout&&!this.scrolling&&(this.immediateStopped=this.stopped=!1,c())},stop:function(a){clearTimeout(this.scrollDelayTimeout);this.scrollDelayTimeout=null;
this.stopped=!0;if(a&&(this.immediateStopped=!0,this.scrolling=!1,this._scroller)){for(var a=this._scroller,c=l.length;c--;)if(l[c]===a){l.splice(c,1);break}l.length||clearInterval(y)}}};e.instances={};var t={};e.catcher=function(a,c){if(a&&t[a]){var b=j[t[a]];b&&b(c)}};var p=[],G,H=q?"DOMContentLoaded":"readystatechange",I=function(){if(q||"complete"===g.readyState)B(g,H,I),o()};e.isReady=!1;e.ready=function(a){e.isReady?a():p&&(p.push(a),G||(G=!0,"complete"===g.readyState?o():(x(g,H,I),x(j,"load",
o),q||function(){if(!e.isReady)try{g.documentElement.doScroll("left"),o()}catch(a){setTimeout(arguments.callee,10)}}())))};j.onAir2=e}(window,document);
